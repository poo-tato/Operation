<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>iArch Studio Console</title>
    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        
        body { background-color: #f8fafc; color: #334155; font-family: 'Pretendard', sans-serif; margin: 0; padding: 60px 20px; display: flex; justify-content: center; }
        .main-wrapper { width: 100%; max-width: 850px; }

        .header { margin-bottom: 40px; }
        .header h1 { font-size: 36px; font-weight: 800; color: #0f172a; margin: 0; letter-spacing: -1px; }
        .header p { color: #94a3b8; margin-top: 8px; font-size: 15px; }

        .summary-bar { display: flex; gap: 40px; margin-bottom: 40px; padding: 15px 5px; border-bottom: 2px solid #f1f5f9; }
        .summary-item b { color: #6366f1; font-size: 24px; font-weight: 800; }
        .summary-item span { font-size: 14px; color: #64748b; margin-left: 8px; font-weight: 600; }

        .input-card { background: white; padding: 25px; border-radius: 24px; box-shadow: 0 10px 30px -5px rgba(0,0,0,0.04); display: flex; gap: 12px; margin-bottom: 30px; border: 1px solid #f1f5f9; }
        input { flex: 1; border: 1px solid #e2e8f0; background: #fff; padding: 14px 18px; border-radius: 14px; font-size: 14px; outline: none; transition: 0.2s; }
        input:focus { border-color: #6366f1; background: #fdfeff; box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1); }
        .add-btn { background: #0f172a; color: white; border: none; padding: 0 30px; border-radius: 14px; font-weight: 700; cursor: pointer; transition: 0.2s; }
        .add-btn:hover { background: #1e293b; transform: translateY(-2px); }

        .item { background: white; margin-bottom: 14px; padding: 22px; border-radius: 20px; display: flex; align-items: center; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.02); border: 1px solid #f1f5f9; }
        .info { flex: 1; }
        .info .title { font-weight: 700; font-size: 17px; color: #1e293b; display: block; }
        .info .client { font-size: 13px; color: #94a3b8; margin-top: 4px; display: flex; gap: 10px; }

        .price { font-weight: 800; margin-right: 25px; color: #334155; font-size: 16px; }

        /* ìƒíƒœë³„ ìƒ‰ìƒ ì ìš© */
        select { border: 1px solid #e2e8f0; background: #f8fafc; padding: 8px 12px; border-radius: 10px; font-size: 13px; font-weight: 700; cursor: pointer; outline: none; transition: 0.2s; }
        select.st-w { color: #94a3b8; } /* ëŒ€ê¸° - íšŒìƒ‰ */
        select.st-i { color: #6366f1; border-color: #c7d2fe; background: #eef2ff; } /* ì§„í–‰ - íŒŒë‘ */
        select.st-d { color: #10b981; border-color: #a7f3d0; background: #ecfdf5; } /* ì™„ë£Œ - ì´ˆë¡ */

        .btn-del { margin-left: 20px; background: none; border: none; color: #cbd5e1; cursor: pointer; font-size: 13px; font-weight: 500; }
        .btn-del:hover { color: #f43f5e; }
    </style>
</head>
<body>

<div class="main-wrapper">
    <div class="header">
        <h1>ëˆ ë§ì´ ë²Œì ğŸ’¸</h1>
        <p id="total-info">iArch Studio Operation Ledger</p>
    </div>

    <div class="summary-bar">
        <div class="summary-item"><b id="count-active">0</b><span>ì§„í–‰ ì¤‘</span></div>
        <div class="summary-item"><b id="sum-revenue">0ì›</b><span>ëˆ„ì  ë§¤ì¶œ</span></div>
    </div>

    <div class="input-card">
        <input type="text" id="p" placeholder="í”„ë¡œì íŠ¸ëª…">
        <input type="text" id="c" placeholder="ê³ ê° ë‹‰ë„¤ì„">
        <input type="number" id="v" placeholder="ê¸ˆì•¡">
        <button class="add-btn" onclick="add()">DEPLOY</button>
    </div>

    <div id="list"></div>
</div>

<script>
    let db = JSON.parse(localStorage.getItem('iarch_vFinal')) || [];

    function render() {
        const list = document.getElementById('list');
        list.innerHTML = '';
        
        db.sort((a, b) => new Date(b.date) - new Date(a.date)); // ìµœì‹ ìˆœ ì •ë ¬

        db.forEach((o, i) => {
            const div = document.createElement('div');
            div.className = 'item';
            div.innerHTML = `
                <div class="info">
                    <span class="title">${o.p}</span>
                    <span class="client">
                        <span>ğŸ‘¤ ${o.c}</span>
                        <span>ğŸ“… ${o.date || 'ë‚ ì§œì—†ìŒ'}</span>
                    </span>
                </div>
                <div class="price">â‚©${Number(o.v).toLocaleString()}</div>
                <select onchange="st(${i}, this.value)" class="st-${o.s}">
                    <option value="w" ${o.s==='w'?'selected':''}>ëŒ€ê¸°</option>
                    <option value="i" ${o.s==='i'?'selected':''}>ì§„í–‰</option>
                    <option value="d" ${o.s==='d'?'selected':''}>ì™„ë£Œ</option>
                </select>
                <button class="btn-del" onclick="rm(${i})">ì‚­ì œ</button>
            `;
            list.appendChild(div);
        });
        updateStats();
    }

    function updateStats() {
        const active = db.filter(o => o.s !== 'd').length;
        const rev = db.filter(o => o.s === 'd').reduce((a, b) => a + Number(b.v), 0);
        document.getElementById('count-active').innerText = active;
        document.getElementById('sum-revenue').innerText = rev.toLocaleString() + 'ì›';
    }

    function add() {
        const p=document.getElementById('p'), c=document.getElementById('c'), v=document.getElementById('v');
        if(!p.value || !c.value || !v.value) return;
        
        const now = new Date();
        const dateStr = `${now.getMonth()+1}/${now.getDate()}`;

        db.push({
            p: p.value, 
            c: c.value, 
            v: v.value, 
            s: 'w',
            date: dateStr // ë‚ ì§œ ì¶”ê°€
        });
        save(); p.value=''; c.value=''; v.value='';
    }

    function st(i,v){ db[i].s=v; save(); }
    function rm(i){ if(confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')){ db.splice(i,1); save(); } }
    function save(){ localStorage.setItem('iarch_vFinal', JSON.stringify(db)); render(); }

    render();
</script>

</body>
</html>
